# External Secrets Operator - sync from OVH Secret Manager
# Install ESO: helm install external-secrets external-secrets/external-secrets -n external-secrets --create-namespace
# This example shows structure; replace storeRef with your OVH Secret Manager backend
---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: ovh-secret-manager
spec:
  provider:
    # Example: generic webhook or vault - adapt for OVH Secret Manager when available
    vault:
      server: "https://vault.example.com"
      path: "secret/obstetric-ai"
      auth:
        tokenSecretRef:
          name: vault-token
          namespace: external-secrets
          key: token
---
# Example ExternalSecret for PostgreSQL (uncomment when backend is configured)
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: postgresql-credentials
#   namespace: obs-prod
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: ovh-secret-manager
#     kind: ClusterSecretStore
#   target:
#     name: postgresql-credentials
#     creationPolicy: Owner
#   data:
#     - secretKey: username
#       remoteRef:
#         key: postgres/username
#     - secretKey: password
#       remoteRef:
#         key: postgres/password
#     - secretKey: database
#       remoteRef:
#         key: postgres/database
